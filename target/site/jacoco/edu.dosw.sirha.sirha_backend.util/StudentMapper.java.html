<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>StudentMapper.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">SIRHA-BackEnd</a> &gt; <a href="index.source.html" class="el_package">edu.dosw.sirha.sirha_backend.util</a> &gt; <span class="el_source">StudentMapper.java</span></div><h1>StudentMapper.java</h1><pre class="source lang-java linenums">package edu.dosw.sirha.sirha_backend.util;

import edu.dosw.sirha.sirha_backend.domain.model.Student;
import edu.dosw.sirha.sirha_backend.dto.StudentDTO;

/**
 * Clase utilitaria para la conversión entre entidades del dominio y DTOs (Data Transfer Objects).
 * 
 * Esta clase implementa el patrón Mapper, proporcionando métodos estáticos para convertir
 * objetos del dominio a sus representaciones DTO correspondientes y viceversa.
 * Los DTOs son utilizados para transferir datos entre las diferentes capas de la aplicación,
 * especialmente entre la capa de presentación (controladores) y la capa de servicio.
 * 
 * Ventajas del uso de DTOs:
 * - Encapsulación: Controla qué información se expone externamente
 * - Versionado: Permite evolucionar la API sin afectar el modelo de dominio
 * - Seguridad: Evita exponer información sensible del modelo interno
 * - Performance: Reduce el tamaño de los datos transferidos
 * 
 */
public class StudentMapper {

<span class="nc" id="L23">    private StudentMapper() {</span>
<span class="nc" id="L24">        throw new UnsupportedOperationException(&quot;Utility class&quot;);</span>
    }

    /**
     * Convierte una entidad Student del dominio a su representación DTO.
     * 
     * Esta conversión incluye:
     * - Información básica del estudiante (id, username, código)
     * - Lista de IDs de solicitudes asociadas (si existen)
     * - Omite información sensible como el hash de contraseña
     * 
     * @param student la entidad Student del dominio a convertir.
     *               Puede ser null, en cuyo caso se retorna null.
     * @return el DTO correspondiente al estudiante, o null si el parámetro es null
     * 
     * @example
     * &lt;pre&gt;
     * Student student = new Student(&quot;1&quot;, &quot;juan.perez&quot;, &quot;hashedPass&quot;, &quot;ESTUDIANTE&quot;, &quot;202112345&quot;);
     * StudentDTO dto = MapperUtils.toDTO(student);
     * // Resultado:
     * // dto.getId() = &quot;1&quot;
     * // dto.getUsername() = &quot;juan.perez&quot;  
     * // dto.getCodigo() = &quot;202112345&quot;
     * // dto.getSolicitudesIds() = [] 
     * &lt;/pre&gt;
     * 
     * @see StudentDTO
     * @see Student
     */
    public static StudentDTO toDTO(Student student) {
        // Manejo defensivo de null
<span class="fc bfc" id="L55" title="All 2 branches covered.">        if (student == null) {</span>
<span class="fc" id="L56">            return null;</span>
        }

<span class="fc" id="L59">        StudentDTO dto = new StudentDTO(</span>
<span class="fc" id="L60">            student.getId(),</span>
<span class="fc" id="L61">            student.getUsername(),</span>
<span class="fc" id="L62">            student.getEmail(),</span>
<span class="fc" id="L63">            student.getCodigo(),</span>
<span class="fc" id="L64">            student.getCareer()</span>
        );


<span class="pc bpc" id="L68" title="1 of 2 branches missed.">        if (student.getSolicitudes() != null) {</span>
<span class="fc" id="L69">            dto.setSolicitudesIds(</span>
<span class="fc" id="L70">                student.getSolicitudes().stream()</span>
<span class="pc bnc" id="L71" title="All 2 branches missed.">                        .filter(solicitud -&gt; solicitud != null)</span>
<span class="pc" id="L72">                        .map(solicitud -&gt; solicitud.getId())</span>
<span class="pc bnc" id="L73" title="All 2 branches missed.">                        .filter(id -&gt; id != null)</span>
<span class="fc" id="L74">                        .toList()</span>
            );
        } else {
<span class="nc" id="L77">            dto.setSolicitudesIds(java.util.Collections.emptyList());</span>
        }

<span class="fc" id="L80">        return dto;</span>
    }

    /**
     * Convierte un StudentDTO a una entidad Student del dominio.
     * 
     * Esta conversión es útil cuando se reciben datos desde la capa de presentación
     * y necesitan ser convertidos a entidades del dominio para procesamiento
     * en la lógica de negocio.
     * 
     */
    public static Student fromDTOnewStudent(StudentDTO dto) {
<span class="fc bfc" id="L92" title="All 2 branches covered.">        if (dto == null) {</span>
<span class="fc" id="L93">            return null;</span>
        }

        // Crear entidad Student con contraseña por defecto
        // En un escenario real, la contraseña debería ser manejada por separado
<span class="fc" id="L98">        return new Student(</span>
<span class="fc" id="L99">            dto.getUsername(),</span>
<span class="fc" id="L100">            dto.getEmail(),</span>
            &quot;defaultPassword&quot;, // Contraseña temporal - debe ser actualizada
<span class="fc" id="L102">            dto.getCode()</span>
        );
    }
    
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>