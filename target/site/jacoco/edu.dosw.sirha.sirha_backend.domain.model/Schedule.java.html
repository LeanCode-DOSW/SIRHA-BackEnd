<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Schedule.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">SIRHA-BackEnd</a> &gt; <a href="index.source.html" class="el_package">edu.dosw.sirha.sirha_backend.domain.model</a> &gt; <span class="el_source">Schedule.java</span></div><h1>Schedule.java</h1><pre class="source lang-java linenums">package edu.dosw.sirha.sirha_backend.domain.model;
import java.time.LocalTime;
import java.util.Objects;

import edu.dosw.sirha.sirha_backend.domain.model.enums.DiasSemana;
import edu.dosw.sirha.sirha_backend.exception.ErrorCodeSirha;
import edu.dosw.sirha.sirha_backend.exception.SirhaException;

/**
 * Representa un horario de clase con un día y un rango de horas.
 * Se utiliza para verificar solapamientos entre horarios
 * de grupos o estudiantes.
 *
 * &lt;p&gt;Ejemplo de uso:&lt;/p&gt;
 * &lt;pre&gt;
 *     Schedule s1 = new Schedule(&quot;Lunes&quot;, 8, 10);
 *     Schedule s2 = new Schedule(&quot;Lunes&quot;, 9, 11);
 *     boolean conflicto = s1.seSolapaCon(s2); // true
 * &lt;/pre&gt;
 */
public class Schedule {

    /** Día de la semana (ej: &quot;Lunes&quot;, &quot;Martes&quot;). */
    private DiasSemana dia;

    /** Hora de inicio en formato 24h (ej: 8 para las 08:00). */
    private LocalTime horaInicio;

    /** Hora de fin en formato 24h (ej: 10 para las 10:00). */
    private LocalTime horaFin;

    /**
     * Crea un nuevo horario.
     *
     * @param dia        Día de la semana (no distingue mayúsculas/minúsculas).
     * @param horaInicio Hora de inicio (en 24h).
     * @param horaFin    Hora de fin (en 24h, debe ser mayor que la hora de inicio).
     * @throws SirhaException 
     */
<span class="fc" id="L40">    public Schedule(DiasSemana dia, LocalTime horaInicio, LocalTime horaFin) throws SirhaException {</span>
<span class="fc bfc" id="L41" title="All 4 branches covered.">        if (horaInicio.isAfter(horaFin) || horaInicio.equals(horaFin)) {</span>
<span class="fc" id="L42">            throw SirhaException.of(ErrorCodeSirha.INVALID_DATE_RANGE,</span>
<span class="fc" id="L43">                    &quot;La hora de inicio debe ser menor que la hora de fin&quot;);</span>
        }
<span class="fc" id="L45">        this.dia = dia;</span>
<span class="fc" id="L46">        this.horaInicio = horaInicio;</span>
<span class="fc" id="L47">        this.horaFin = horaFin;</span>
<span class="fc" id="L48">    }</span>

    /**
     * Verifica si este horario se solapa con otro.
     * Dos horarios se solapan si son el mismo día y
     * los rangos de horas tienen alguna intersección.
     *
     * @param otro Otro horario a comparar.
     * @return {@code true} si los horarios se solapan, {@code false} en caso contrario.
     */
    public boolean seSolapaCon(Schedule otro) {
<span class="fc bfc" id="L59" title="All 2 branches covered.">        if (!dia.equals(otro.dia)) {</span>
<span class="fc" id="L60">            return false;</span>
        }
<span class="pc bpc" id="L62" title="1 of 4 branches missed.">        return this.horaInicio.isBefore(otro.horaFin) &amp;&amp; otro.horaInicio.isBefore(this.horaFin);</span>
    }

    /**
     * Obtiene la hora de fin del horario.
     *
     * @return Hora de fin en formato 24h.
     */
    public LocalTime getHoraFin() {
<span class="fc" id="L71">        return horaFin;</span>
    }

    /**
     * Obtiene la hora de inicio del horario.
     *
     * @return Hora de inicio en formato 24h.
     */
    public LocalTime getHoraInicio() {
<span class="fc" id="L80">        return horaInicio;</span>
    }

    /**
     * Obtiene el día de la semana del horario.
     *
     * @return Día en texto (ej: &quot;Lunes&quot;).
     */
    public DiasSemana getDia() {
<span class="fc" id="L89">        return dia;</span>
    }

    /**
     * Compara este horario con otro basado en día, hora de inicio y hora de fin.
     * La comparación de día no distingue mayúsculas/minúsculas.
     *
     * @param o Objeto a comparar.
     * @return {@code true} si son equivalentes, {@code false} en caso contrario.
     */
    @Override
    public boolean equals(Object o) {
<span class="pc bpc" id="L101" title="1 of 2 branches missed.">        if (this == o) return true;</span>
<span class="fc bfc" id="L102" title="All 2 branches covered.">        if (!(o instanceof Schedule)) return false;</span>
<span class="fc" id="L103">        Schedule that = (Schedule) o;</span>
<span class="pc bpc" id="L104" title="1 of 2 branches missed.">        return horaInicio.equals(that.horaInicio) &amp;&amp;</span>
<span class="nc bnc" id="L105" title="All 2 branches missed.">                horaFin.equals(that.horaFin) &amp;&amp;</span>
<span class="nc bnc" id="L106" title="All 2 branches missed.">                dia.equals(that.dia);</span>
    }
    @Override
    public int hashCode() {
<span class="fc" id="L110">        return Objects.hash(dia, horaInicio, horaFin);</span>
    }

    /**
     * Representación en texto del horario.
     *
     * @return Cadena con el día, hora de inicio y hora de fin.
     */
    @Override
    public String toString() {
<span class="fc" id="L120">        return &quot;Schedule{&quot; +</span>
<span class="fc" id="L121">                &quot;dia='&quot; + dia + '\'' +</span>
<span class="fc" id="L122">                &quot;, horaInicio=&quot; + horaInicio +</span>
<span class="fc" id="L123">                &quot;, horaFin=&quot; + horaFin +</span>
                '}';
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>